{% extends "./skeletons/dashboard.html" %}
{% block title %}APS - Client Configuration{% endblock %}
{% block content %}
    <h1>Konfiguracja klienta</h1>
    <div class="content_unit">
        <h2 style="color: red;">{{ error_message }}</h2>
        <form id="conf_form" method="post" action="{{ current_url }}">
            {% csrf_token %}
            <table class="table">
                {{ form.as_table }}
                <tr>
                    <td>Monitored properties:</td>
                    <td>
                        <table class="table">
                            <tr>
                                <th>
                                    Is monitored
                                </th>
                                <th>
                                    Show on dashboard
                                </th>
                                <th>
                                    Property name [unit]
                                </th>
                            </tr>
                            {% for monitored_property in monitored_properties %}
                                <tr>
                                    <td>
                                        <input type="checkbox" name="monitored_properties[]" class="checkbox"
                                               value="{{ monitored_property.pk }}" {{ monitored_property.checked|yesno:"checked," }}
                                               id="checkbox{{ monitored_property.pk }}"/>
                                    </td>
                                    <td>
                                        <input type="radio" id="radio{{ monitored_property.pk }}"
                                               name="show_on_dashboard[]"
                                               value="{{ monitored_property.pk }}" class="radio"
                                               onclick="on_radio_checked('checkbox{{ monitored_property.pk }}')"
                                               {{ monitored_property.on_dashboard|yesno:"checked," }}
                                        />
                                    </td>
                                    <td>{{ monitored_property.name }} [{{ monitored_property.type }}]
                                    <td/>
                                <tr/>
                            {% endfor %}
                        </table>
                    </td>
                </tr>
                <tr>
                    <td><input type="submit" class="btn btn-warning" value="Configure"/></td>
                </tr>
            </table>
        </form>
    </div>
    <script type="text/javascript">
        function on_radio_checked(checkbox_id) {
            var checkbox = document.getElementById(checkbox_id);
            checkbox.checked = true;
        }
    </script>
{% endblock %}